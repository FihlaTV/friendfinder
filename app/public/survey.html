<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0" >
  <meta http-equiv="X-UA-Compatible" content="ie=edge" >
  <title>Double Data: Survey</title>
  <script
  src="http://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>
</head>
<body>
    
  <header>
    <h1>Double Data</h1>
    <h4>Helping developers find each other because pair programming is best.</h4>
  </header>
  <section>
    <div class="survey">
      <form action="">
        <legend>Survey</legend>
        <p>Fields marked with an asterisk (*) are required.</p>
        <div>
          <h2>Your name</h2>
          <input name="name" class="inputFields" id= "name" placeholder="Your name" type="text" required>
          <h2>Photo (URL link)</h2>
          <input name="photoUrl" class="inputFields" id= "photoUrl" placeholder="http:// ..." type="url" required>
        </div>
        <div>
          <h2>Q1: You prefer to code in a public place like a coffee shop</h2>
          <select class="dropDowns" id="question1">
            <option></option>
            <option value="1">1 (Yes! My house is distracting)</option>
            <option value="2">2</option>
            <option value="3">3 (Sometimes)</option>
            <option value="4">4</option>
            <option value="5">5 (No. I code on the couch.)</option>
          </select> 
          <h2>Q2: You are not afraid of commitment when it comes to GitHub.</h2>
          <select class="dropDowns" id="question2">
              <option></option>
              <option value="1">1 (I'm a mean green committing machine!)</option>
              <option value="2">2</option>
              <option value="3">3 (When I remember)</option>
              <option value="4">4</option>
              <option value="5">5 (It's on my laptop. That's good enough.)</option>
          </select> 
          <h2>Q3: You go to StackOverflow for some help, but find the comments full of self-righteous jackasses.</h2>
          <select class="dropDowns" id="question3">
              <option></option>
              <option value="1">1 (Yes. The arrogance is painful.)</option>
              <option value="2">2</option>
              <option value="3">3 (I never read comments.)</option>
              <option value="4">4</option>
              <option value="5">5 (No. I'm kind of an ass myself.)</option>
            </select>
          <h2>Q4: You prefer React to Angular.</h2>
          <select class="dropDowns" id="question4">
            <option></option>
            <option value="1">1 (Frankie says REACT!)</option>
            <option value="2">2</option>
            <option value="3">3 (Meh. I prefer VueJS.)</option>
            <option value="4">4</option>
            <option value="5">5 (Wham bam bAngular!)</option>
          </select> 
          <h2>Q5: You prefer to style your own over relying on Bootstrap.</h2>
          <select class="dropDowns" id="question5">
            <option></option>
            <option value="1">1 (Yes. I love being in control.)</option>
            <option value="2">2</option>
            <option value="3">3 (I take what I need.)</option>
            <option value="4">4</option>
            <option value="5">5 (Cut and paste me, and call me Shirley.)</option>
          </select> 
          <h2>Q6: You enjoy daily coding challenges.</h2>
          <select class="dropDowns" id="question6">
            <option></option>
            <option value="1">1 (I love them!)</option>
            <option value="2">2</option>
            <option value="3">3 (Meh.)</option>
            <option value="4">4</option>
            <option value="5">5 (They feel restrictive.)</option>
          </select> 
          <h2>Q7: You have interests outside of the terminal.</h2>
          <select class="dropDowns" id="question7">
            <option></option>
            <option value="1">1 (Yes! I'm multifaceted.)</option>
            <option value="2">2</option>
            <option value="3">3 (Some.)</option>
            <option value="4">4</option>
            <option value="5">5 (Teminal is life.)</option>
          </select>
          <h2>Q8: You keep up by listening to podcasts and reading online posts on sites like Medium.</h2>
          <select class="dropDowns" id="question8">
            <option></option>
            <option value="1">1 (Definitely. Those are my peeps.)</option>
            <option value="2">2</option>
            <option value="3">3 (No opinion)</option>
            <option value="4">4</option>
            <option value="5">5 (If I'm reading or listening, I'm not coding.)</option>
          </select> 
          <h2>Q9: You sometimes go to Meetups for the food.</h2>
          <select class="dropDowns" id="question9">
            <option></option>
            <option value="1">1 (I judge groups by their food options.)</option>
            <option value="2">2</option>
            <option value="3">3 (Only if it's pizza.)</option>
            <option value="4">4</option>
            <option value="5">5 (I'm there for schmoozing, and I can't schmooze greasy.)</option>
          </select>
          <h2>Q10: You wish that "open source" didn't sound so much like "open sores".</h2>
          <select class="dropDowns" id="question10">
            <option></option>
            <option value="1">1 (Yes. Drives me nuts.)</option>
            <option value="2">2</option>
            <option value="3">3 (Never noticed.)</option>
            <option value="4">4</option>
            <option value="5">5 (No. I only know people who speak clearly.)</option>
          </select>
        </div>
        <div>
          <button type="submit" id="submitBtn">Find a dev</button>
        </div>
      </form>
    </div>
  </section>
  
</body>
</html>

<script type="text/javascript"> 
  $("#submitBtn").on("click", function(e){
    e.preventDefault();
      //validate twice: required? at input (inputFields) and at dropdown(dropDowns)
      //return true. start with true so false msg can be given
      //if true, capture data, move on.
      //else alert.
    function validateSurvey(){
      let formCompleted = true;
      //iterate over two inputFields. 
      $('.inputFields').each(function(){
        if(($this).val() === ''){
          alert(`You have left ${$(this)} empty`)
          formCompleted = false;
        }//if 
      });//inputFields
      $('.dropDowns').each(function(){
        if($(this).val ===''){
          alert(`You have left ${$(this)} empty`)
          formCompleted = false;
        }//if
      });//dropDowns
      return formCompleted;
    };//end survey validation: validateSurvey
      


      // var currentURL = window.location.origin;
    if(formCompleted){
      var currentURL = window.location.origin;
      //capture user's info from survey.
      var newFriend = {
        name: $("#name").val().trim(),
        photoUrl: $("#photoUrl").val().trim(),
        scores: [
          $('#question1').val(),
          $('#question2').val(),
          $('#question3').val(),
          $('#question4').val(),
          $('#question5').val(),
          $('#question6').val(),
          $('#question7').val(),
          $('#question8').val(),
          $('#question9').val(),
          $('#question10').val()
        ]
      };//end newFriend how sad
      $.post(currentURL+"/api/friends", newFriend, function(){
        alert("your data has been saved");
      });

      
      console.log(newFriend);
    };//end if formCompleted
  });//end "#submitBtn" on "click"
  
</script>